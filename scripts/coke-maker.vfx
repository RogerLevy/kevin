require scripts\coke.vfx

class: coke-maker
    actor derive
    prop kids <ref actor
    prop period <save <int
class;

: *coke  me 0 -20 from  coke one kids ! ;

: init-coke-maker  ( n - )
    period ! 
    coke.ts 0 tile bmp !  
    act>
        bmp off
        1.0 passed? -exit  *coke
    act>
        kids @ 0= if  period @ passed? -exit  *coke then 
        kids @ if  kids @ coke is? not if 0 kids ! then  then ;

coke-maker :: init
    3000 init-coke-maker ;
