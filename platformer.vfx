\ ------------------------------------------------------------------------------
\ Platformer System
\
\ WIP
\ ------------------------------------------------------------------------------

trait: platformer
    prop hp <int <save
    prop fac <int <save
    prop falling <save
    prop in-air <save
    prop climbing <save
    prop gravity <save <fixed
    prop terminal-vy <save <fixed
    prop jumppower <save <fixed
    prop risepower <save <fixed
    prop walkspeed <save <fixed
    prop inertia <save <fixed

    :: _walk  drop ;  
    :: _jump ;        
    :: _squat ;       
    :: _idle ;        
    :: _fall ;        
    :: burn ;
    :: _climb ;       
    :: collide  drop ;
trait;

class: actor
    works-with platformer
class;

: walk  me _walk ;
: jump  in-air on  me _jump ;
: squat  me _squat ;
: idle  me _idle ;
: climb me _climb ;
: revive   100 hp ! idle ;
: fall
    in-air on
    falling @ not  if  falling on  me _fall  then ;
    \ ; \ in-air on falling on me _fall ;
